# ä¸¥è°¨æµ‹è¯•æ¡†æ¶è¯´æ˜

## ğŸ¯ ç›®æ ‡
ä¸ºå­¦æœ¯æŠ¥å‘Šæä¾›ç»Ÿè®¡å­¦ä¸Šä¸¥è°¨ã€å¯é‡ç°çš„æµ‹è¯•æ•°æ®ï¼Œè§£å†³ä¹‹å‰æµ‹è¯•ä¸­çš„æ•°æ®ä¸åŒ¹é…é—®é¢˜ã€‚

## ğŸ“Š æµ‹è¯•è®¾è®¡åŸåˆ™

### 1. ç»Ÿè®¡æ˜¾è‘—æ€§
- **æ ·æœ¬é‡**: æ¯é¡¹æµ‹è¯•nâ‰¥30ï¼Œç¡®ä¿ç»Ÿè®¡æ˜¾è‘—æ€§
- **é‡å¤æ€§**: æ”¯æŒå¤šè½®æµ‹è¯•å’Œç»“æœèšåˆ
- **ç½®ä¿¡åŒºé—´**: è®¡ç®—95%ç½®ä¿¡åŒºé—´
- **å¼‚å¸¸å€¼å¤„ç†**: IQRæ–¹æ³•æ£€æµ‹å’Œå¤„ç†å¼‚å¸¸å€¼

### 2. å­¦æœ¯è§„èŒƒ
- **æ•°æ®æº¯æº**: æ‰€æœ‰ç»“æœå¯è¿½æº¯åˆ°å…·ä½“æµ‹è¯•å‚æ•°
- **æ—¶é—´æˆ³**: å®Œæ•´çš„æ—¶é—´æˆ³è®°å½•
- **åŸå§‹æ•°æ®**: ä¿ç•™åŸå§‹æ•°æ®ä¾›éªŒè¯
- **ç»Ÿè®¡æŠ¥å‘Š**: ç¬¦åˆå­¦æœ¯æ ‡å‡†çš„ç»Ÿè®¡æè¿°

### 3. æµ‹è¯•è¦†ç›–
- **Wake-Wordæµ‹è¯•**: å¤šSNRçº§åˆ« Ã— 30æ ·æœ¬ Ã— 3ç±»åˆ« = 270+æ ·æœ¬
- **å»¶è¿Ÿæµ‹è¯•**: 50+æ ·æœ¬ï¼ŒåŒ…å«å®Œæ•´çš„ç«¯åˆ°ç«¯å»¶è¿Ÿé“¾
- **ä¸­æ–­æµ‹è¯•**: 60+æ ·æœ¬ï¼Œå¤šç§ä¸­æ–­æ—¶æœºä¸“é—¨æµ‹è¯•

## ğŸ§ª æµ‹è¯•è„šæœ¬

### 1. `rigorous_wakeword_test.py`
**ç›®æ ‡**: è·å¾—ç»Ÿè®¡å­¦ä¸Šæ˜¾è‘—çš„å”¤é†’è¯æ€§èƒ½æ•°æ®

**ç‰¹ç‚¹**:
- æ¯ä¸ªSNRçº§åˆ«30ä¸ªæ ·æœ¬ï¼ˆç»Ÿè®¡å­¦è¦æ±‚nâ‰¥30ï¼‰
- æ­£æ ·æœ¬ã€è´Ÿæ ·æœ¬ã€æ··æ·†æ ·æœ¬ä¸‰ç±»å¹³è¡¡æµ‹è¯•
- æ”¯æŒå¤šè½®æµ‹è¯•å’Œç»“æœèšåˆ
- ä¸¥æ ¼çš„æ•°æ®è®°å½•å’ŒéªŒè¯

**ç”¨æ³•**:
```bash
python3 rigorous_wakeword_test.py --snr-levels 20 10 0 --samples-per-snr 30 --rounds 1
```

**è¾“å‡º**:
- `rigorous_wakeword_raw_*.json`: åŸå§‹æµ‹è¯•æ•°æ®
- `rigorous_wakeword_summary_*.json`: æ±‡æ€»ç»Ÿè®¡æŒ‡æ ‡
- `rigorous_wakeword_data_*.csv`: CSVæ ¼å¼æ•°æ®
- `rigorous_wakeword_report_*.txt`: äººç±»å¯è¯»æŠ¥å‘Š

### 2. `rigorous_latency_test.py`
**ç›®æ ‡**: è·å¾—ç»Ÿè®¡å­¦ä¸Šå¯é çš„å»¶è¿Ÿæ€§èƒ½æ•°æ®

**ç‰¹ç‚¹**:
- 50+æ ·æœ¬ç¡®ä¿ç»Ÿè®¡æ˜¾è‘—æ€§
- åŒæ—¶æµ‹é‡å¤šä¸ªå»¶è¿ŸæŒ‡æ ‡
- åŒ…å«ç½®ä¿¡åŒºé—´è®¡ç®—
- å¼‚å¸¸å€¼æ£€æµ‹å’Œå¤„ç†
- ç½‘ç»œåŸºçº¿å»¶è¿Ÿæµ‹é‡

**ç”¨æ³•**:
```bash
python3 rigorous_latency_test.py --samples 50 --with-interruption --inter-trial-delay 2.0
```

**æµ‹é‡æŒ‡æ ‡**:
- Speech-to-first-response latency
- Speech-to-TTS-start latency  
- Total response time
- Interruption latency (å¦‚å¯ç”¨)
- Network baseline correction

### 3. `rigorous_interruption_test.py`
**ç›®æ ‡**: ä¸“é—¨æµ‹è¯•ä¸­æ–­å“åº”æ€§èƒ½

**ç‰¹ç‚¹**:
- å¤§æ ·æœ¬ä¸­æ–­æµ‹è¯• (nâ‰¥50)
- å¤šç§ä¸­æ–­æ—¶æœºæµ‹è¯• (0.2s, 0.5s, 1.0s, 2.0s)
- ä¸­æ–­æˆåŠŸç‡åˆ†æ
- ç³»ç»Ÿæ¢å¤æ—¶é—´æµ‹é‡
- P95/P99ç™¾åˆ†ä½æ•°åˆ†æ

**ç”¨æ³•**:
```bash
python3 rigorous_interruption_test.py --samples 60 --interruption-times 0.2 0.5 1.0 2.0
```

**æµ‹é‡æŒ‡æ ‡**:
- Interruption latency (ä¸­æ–­ä¿¡å·â†’TTSåœæ­¢)
- System cleanup time (TTSåœæ­¢â†’ç³»ç»Ÿå°±ç»ª)
- Recovery response time (ç³»ç»Ÿå°±ç»ªâ†’æ–°è¯·æ±‚å“åº”)
- Total recovery time (ä¸­æ–­ä¿¡å·â†’å®Œå…¨æ¢å¤)
- Success rates (ä¸­æ–­æˆåŠŸç‡ã€æ¢å¤æˆåŠŸç‡)

### 4. `rigorous_test_manager.py`
**ç›®æ ‡**: ç»Ÿä¸€ç®¡ç†å’Œæ‰§è¡Œæ‰€æœ‰ä¸¥è°¨æµ‹è¯•

**ç‰¹ç‚¹**:
- å‰ææ¡ä»¶æ£€æŸ¥
- æµ‹è¯•æ‰§è¡Œç®¡ç†
- è¿›åº¦ç›‘æ§å’Œå¼‚å¸¸å¤„ç†
- ç»¼åˆæ‰§è¡ŒæŠ¥å‘Š

**ç”¨æ³•**:
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python3 rigorous_test_manager.py --run-all

# è¿è¡Œç‰¹å®šæµ‹è¯•
python3 rigorous_test_manager.py --wakeword --latency

# ä»…è¿è¡Œä¸­æ–­æµ‹è¯•
python3 rigorous_test_manager.py --interruption-only

# æ£€æŸ¥å·²æœ‰ç»“æœ
python3 rigorous_test_manager.py --check-results

# åˆ—å‡ºå¯ç”¨æµ‹è¯•
python3 rigorous_test_manager.py --list
```

## ğŸ“ˆ æ•°æ®è´¨é‡ä¿è¯

### ç»Ÿè®¡è¦æ±‚
- **æ ·æœ¬é‡**: nâ‰¥30 (Central Limit Theorem)
- **ç½®ä¿¡æ°´å¹³**: 95%ç½®ä¿¡åŒºé—´
- **å¼‚å¸¸å€¼**: IQRæ–¹æ³•æ£€æµ‹ï¼Œ<5%å¼‚å¸¸å€¼ç‡
- **é‡å¤æ€§**: ç»“æœåœ¨å¤šæ¬¡è¿è¡Œé—´å˜å¼‚ç³»æ•°<10%

### æŠ¥å‘Šæ ¼å¼
æ‰€æœ‰ç»“æœä»¥å­¦æœ¯æ ‡å‡†æ ¼å¼æŠ¥å‘Šï¼š
```
ä¸­ä½æ•° [IQR] (n=æ ·æœ¬æ•°)
ä¾‹: 0.279s [0.260-0.295] (n=50)
```

### æ•°æ®éªŒè¯
- æ—¶é—´æˆ³è¿ç»­æ€§æ£€æŸ¥
- æ•°å€¼èŒƒå›´åˆç†æ€§éªŒè¯  
- ç»Ÿè®¡åˆ†å¸ƒæ­£æ€æ€§æµ‹è¯•
- è·¨æµ‹è¯•ä¸€è‡´æ€§éªŒè¯

## ğŸ”„ æ¨èæ‰§è¡Œæµç¨‹

### 1. ç¯å¢ƒæ£€æŸ¥
```bash
python3 rigorous_test_manager.py --list
python3 rigorous_test_manager.py --check-results
```

### 2. æ‰§è¡Œæµ‹è¯•
```bash
# å¦‚æœæ—¶é—´å……è¶³ï¼Œæ‰§è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
python3 rigorous_test_manager.py --run-all

# å¦‚æœæ—¶é—´æœ‰é™ï¼Œä¼˜å…ˆæ‰§è¡Œå…³é”®æµ‹è¯•
python3 rigorous_test_manager.py --wakeword --latency
```

### 3. ç»“æœéªŒè¯
- æ£€æŸ¥ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶
- éªŒè¯æ ·æœ¬æ•°æ˜¯å¦è¾¾åˆ°è¦æ±‚
- ç¡®è®¤å¼‚å¸¸å€¼æ¯”ä¾‹åˆç†
- å¯¹æ¯”å¤šæ¬¡è¿è¡Œç»“æœçš„ä¸€è‡´æ€§

### 4. æŠ¥å‘Šé›†æˆ
- å°†JSON/CSVæ•°æ®å¯¼å…¥åˆ°æœ€ç»ˆæŠ¥å‘Š
- ä½¿ç”¨æ ‡å‡†ç»Ÿè®¡æè¿°æ ¼å¼
- åŒ…å«æ•°æ®æ¥æºå’Œæµ‹è¯•æ—¶é—´
- æ˜ç¡®æ ‡æ³¨æµ‹è¯•æ¡ä»¶å’Œé™åˆ¶

## âš ï¸ æ³¨æ„äº‹é¡¹

### æµ‹è¯•ç¯å¢ƒ
- ç¡®ä¿ROS2ç¯å¢ƒæ­£ç¡®é…ç½®
- ç½‘ç»œè¿æ¥ç¨³å®šï¼ˆç”¨äºAPIè°ƒç”¨ï¼‰
- è¶³å¤Ÿçš„å­˜å‚¨ç©ºé—´ä¿å­˜ç»“æœæ–‡ä»¶
- æµ‹è¯•æœŸé—´é¿å…ç³»ç»Ÿè´Ÿè½½è¿‡é«˜

### æ—¶é—´è§„åˆ’
- Wake-wordæµ‹è¯•: ~15åˆ†é’Ÿ
- Latencyæµ‹è¯•: ~20åˆ†é’Ÿ
- Interruptionæµ‹è¯•: ~15åˆ†é’Ÿ
- æ€»è®¡: ~50åˆ†é’Ÿï¼ˆå®Œæ•´æµ‹è¯•å¥—ä»¶ï¼‰

### æ•°æ®ä½¿ç”¨
- æ‰€æœ‰ç”Ÿæˆçš„æ•°æ®å¯ç›´æ¥ç”¨äºå­¦æœ¯æŠ¥å‘Š
- æ—¶é—´æˆ³å’Œé…ç½®ä¿¡æ¯æ”¯æŒç»“æœå¤ç°
- CSVæ ¼å¼ä¾¿äºè¿›ä¸€æ­¥ç»Ÿè®¡åˆ†æ
- JSONæ ¼å¼ä¿ç•™å®Œæ•´å…ƒæ•°æ®

## ğŸ“ å­¦æœ¯ä»·å€¼

è¿™å¥—æµ‹è¯•æ¡†æ¶ç¡®ä¿ï¼š
1. **ç»Ÿè®¡ä¸¥è°¨æ€§**: è¶³å¤Ÿçš„æ ·æœ¬é‡å’Œæ­£ç¡®çš„ç»Ÿè®¡æ–¹æ³•
2. **å¯é‡ç°æ€§**: è¯¦ç»†çš„é…ç½®è®°å½•å’Œæ ‡å‡†åŒ–æµç¨‹
3. **æ•°æ®å®Œæ•´æ€§**: åŸå§‹æ•°æ®ã€ä¸­é—´ç»“æœã€æœ€ç»ˆç»Ÿè®¡å…¨ä¿ç•™
4. **å­¦æœ¯è§„èŒƒ**: ç¬¦åˆå·¥ç¨‹å­¦ç§‘å®éªŒæŠ¥å‘Šæ ‡å‡†
5. **é€æ˜åº¦**: æµ‹è¯•æ–¹æ³•ã€å‚æ•°ã€é™åˆ¶å…¨éƒ¨æ˜ç¡®è®°å½•

é€šè¿‡è¿™å¥—ä¸¥è°¨æµ‹è¯•æ¡†æ¶ï¼Œä½ çš„å­¦æœ¯æŠ¥å‘Šå°†å…·æœ‰å¯é çš„å®éªŒæ•°æ®æ”¯æ’‘ã€‚